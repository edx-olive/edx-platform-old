<style>
/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 465px;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */4
}

/* Modal Content */

/*.modal-content {
    background-color: #fefefe;
    margin: 40px auto auto 382px;
    padding: 20px;
    border: 1px solid #888;
    width: 35%;
    height: 165px;
}*/

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

/*.section-list label{
  position: absolute; ;
  left: 420px;
  font-size: 19px;
}*/


#cs_modal{

    width: 600px;

    border: solid 8px #e6e6e6;

    border-radius: 4px;

    margin: auto;

    font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;

    text-align:left;

}


.cs-modal-title{

    font-size: 21px;

    font-family: calibri;

    background: rgb(229,229,229);

    padding: 10px;

}

.cs-modal-body{

    padding: 10px;

    font-size: 14px;

    background: white;

   height: 300px;

}

/*ul{

    margin: 10px 0px;

    padding: 10px;

}*/


#cs_modal li{

    border: solid 1px #e6e6e6;

    padding: 5px 10px;

    margin-top: 10px;

    color: #333;

    height: 25px;

}

#cs_modal li.checked{

    background: #f6f6f6;

    box-shadow: 2px 2px 5px 0px #ccc;

}

#common-section-cancel-btn{

    text-align: center;

    margin: 25px 10px 4px 0px;

    width: 40%;

    background: #009fe6;

    border-color: #009fe6;

    color: #fff;

    border-radius: 5px;

    display: inline-block;

    cursor: pointer;

    padding: 10px;

    float: right;

}

#common-section-btn{

    text-align: center;

    margin: 25px 10px 4px 0px;

    width: 40%;

    background: #009fe6;

    border-color: #009fe6;

    color: #fff;

    border-radius: 5px;

    display: inline-block;

    cursor: pointer;

    padding: 10px;

    float: right;

}

#cs_modal label{

    position: relative;

    font-size: 14px;

    left: inherit;

}

#cs_modal input {

    display: none;

}

#cs_modal ul {

    margin-top: 25px;

}

#cs_modal li .fa-check-square{

    display: none;

}
#cs_modal li.checked .fa-check-square{

    color: green;

    display: inline-block;

}

#cs_modal li.checked .fa-times{

    color: red;

}

#cs_modal li.checked .fa-times{

    display: none;

}

#myProgress {
  width: 100%;
  background-color: #ddd;
}

#myBar {
  width: 0;
  height: 30px;
  background-color: #4CAF50;
  text-align: center;
  line-height: 30px;
  color: white;
}

</style>

<%
  introduction_created = False
  survey_created = True
%>


		<div id="myModal" class="modal">
                  <div id="cs_modal" >
                    <div class="cs-modal-title">Update Common sections</div>
                      <div class="cs-modal-body">
                        <div class="modal-discription">Update The Common section by below sections 
                        </div>
                        <ul class="section-list">
			 %if introduction_created:
			  <li style="pointer-events:none">
                            <input type="checkbox" class="new-introduction-section" name="new-introduction-section" id="intro-section"/>
                           <label style="text-decoration: line-through;" for="intro-section">Introduction  Section</label>
                          </li>
			%else:
                          <li class="checked">
                            <input type="checkbox" class="new-introduction-section" name="new-introduction-section" id="intro-section" checked/>
                            <i class="fa fa-check-square" aria-hidden="true"></i>
                            <i class="fa fa-times" aria-hidden="true"></i>
                           <label for="intro-section">Introduction  Section</label>
                          </li>
			%endif
			%if survey_created:
                          <li style="pointer-events:none">
                            <input type="checkbox" class="new-yameer-section" name="new-yameer-section" id="yammer-tab"/>
                            <label for="yammer-tab" style="text-decoration: line-through;">Survey Section</label>
                          </li>
			%else:
			  <li class="checked">
                            <input type="checkbox" class="new-yameer-section" name="new-yameer-section" id="yammer-tab" checked/>
                            <i class="fa fa-check-square" aria-hidden="true"></i>
                            <i class="fa fa-times" aria-hidden="true"></i>
                            <label for="yammer-tab">Survey Section</label>
                          </li>
			%endif
                        </ul>
                       <div id="myProgress">
                          <div id="myBar"></div>
                        </div>


                      <button class="add-xblock-section" id="myBtn" style="display:none">Proceed</button>
                      <div class="add-xblock-section" id="common-section-btn">Yes, go ahead</div>
		      <div onclick="cancel()" id="common-section-cancel-btn">Cancel</div>
                      </div>
                    </div>
                  </div>




<script type="text/javascript">

function updatecommonsection(){
    $("#myModal").css('display','block');
    $("#myProgress").css('display','none');
}

function cancel(){
    $("#myModal").css('display','none');
}



setTimeout(function(){
$(function(){
   $("#myProgress").css('display','none');
   $("#cs_modal li").click(function(e){

                  checkbox = $("input", $(e.currentTarget));

                  is_checked = $(checkbox).prop("checked");

                  $(checkbox).prop("checked", !is_checked );

                  is_checked?$(e.currentTarget).removeClass("checked"):$(e.currentTarget).addClass("checked");

   });
   $("#common-section-btn").click(function(e){
	$.get('/updatecommonsection');
		  $("#myProgress").css('display','block');
  		  var elem = document.getElementById("myBar");
		  var width = 10;
  		  var id = setInterval(frame, 1000);
  		  function frame() {
	           if (width >= 100) {
      			clearInterval(id);
			$("#myModal").css('display','none');
	    		   } else {
        	   $.get('/get_commonsection/',function(data){
                
                	var z = data.result;
       			var y = data.count;
        		var x = (y/z)*100
		        if (y == z) {
                		width = width + 100;
        		}
      
      			elem.style.width = x + '%';
      			elem.innerHTML = x * 1  + '%';
        		});

    			}
  		}

   });

});}, 3000);

</script>

